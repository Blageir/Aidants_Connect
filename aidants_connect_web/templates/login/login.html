{% extends 'layouts/main.html' %}

{% load static %}

{% block title %}Aidants Connect - Connexion{% endblock %}

{% block extracss %}
<link href="{% static 'css/login.css' %}" rel="stylesheet">
{% endblock extracss %}

{% block content %}
<div class="page">
  <div class="main-page">
    <section class="section section-white">
      <div class="container">
        <form method="post">
          {% csrf_token %}
          {% if user.is_authenticated %}
            <div class="notification" role="alert">
              Vous êtes déjà connecté
            </div>
            <div class="text-center">
              <a href="{% url LOGGED_IN_REDIRECT_URL_NAME %}" class="btn btn-success">Accédez à l'accueil</a>
              <a href="{% url LOGOUT_URL_NAME %}" class="btn btn-warning">Déconnectez-vous</a>
            </div>
          {% else %}
            {% if messages %}
              <div>
                {% for message in messages %}
                  <div class="notification {% if message.tags %}{{ message.tags }}{% endif %}" role="alert">{{ message }}</p>
                {% endfor %}
              </div>
            {% endif %}
            <div class="form__group">
              <h1>Aidants Connect est actuellement en expérimentation.</h1>
              <p><strong>Ce service est pour l'instant reservé aux aidants professionnels salariés d'une des 13 structures habilitées Aidants Connect.</strong></p>
              <p>Si vous faites partie de l'une de ces structures, vous pouvez vous connecter :</p>
              <input type="email" id="id_email" class="form-control {% if form.errors %}state-invalid{% endif %}"
                name="email" aria-describedby="emailHelp" placeholder="Votre adresse email" required />
              {% for error in form.email.errors %}
                <div class="notification error" role="alert">{{ error }}</div>
              {% endfor %}
            </div>
          
            <div class="form-group">
              <label>{{ OTP_form.otp_token.label_tag }}</label>
              {{ OTP_form.otp_token }}
              {% for error in OTP_form.otp_token.errors %}
                <div class="notification error" role="alert">{{ error }}</div>
              {% endfor %}
            </div>
            <button type="submit" class="button">Valider</button>
          {% endif %}
        </form>
        <div class="text-center text-muted">
          <p>
            Il s'agit d'un service visant à faciliter et à sécuriser juridiquement l'accompagnement d'usagers dans la réalisation de leurs démarches administratives en ligne par des aidants professionnels habilités (agents publics d'accueil, travailleurs sociaux, médiateurs numériques, etc.).
          </p>
          <p>
            Pour en savoir plus, <a href="mailto:aidantsconnect@beta.gouv.fr?subject=[site Aidants Connect - login] Demande d'informations">contactez-nous</a>.
          </p>
          <p>
            Vous êtes un aidant habilité Aidants Connect et vous rencontrez des difficultés pour vous connecter ?
          </p>
          <a href="mailto:aidantsconnect@beta.gouv.frsubject=[site Aidants Connect - login] Demande d'aide au login">Demandez de l'aide</a>
        </div>
      </div>
    </section>
  </div>
</div>
{% endblock content %}
