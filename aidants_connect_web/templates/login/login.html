{% extends 'layouts/main.html' %}

{% load static %}

{% block title %}Aidants Connect - Connexion{% endblock %}

{% block extracss %}
<link href="{% static 'css/login.css' %}" rel="stylesheet">
{% endblock extracss %}

{% block content %}
<div class="page">
  <div class="main-page">
    <section class="section section-white">
      <div class="container">
        <form method="post">
          {% csrf_token %}
          {% if user.is_authenticated %}
            <div class="notification" role="alert">
              Vous êtes déjà connecté
            </div>
            <div class="text-center">
              <a href="{% url LOGGED_IN_REDIRECT_URL_NAME %}" class="btn btn-success">Accédez à l'accueil</a>
              <a href="{% url LOGOUT_URL_NAME %}" class="btn btn-warning">Déconnectez-vous</a>
            </div>
          {% else %}
            {% if messages %}
              <div>
                {% for message in messages %}
                  <div class="notification {% if message.tags %}{{ message.tags }}{% endif %}" role="alert">{{ message }}</p>
                {% endfor %}
              </div>
            {% endif %}
            <div class="form__group">
              <h1>Aidants Connect est actuellement en expérimentation.</h1>
              <p><strong>Ce service est pour l'instant reservé aux aidants professionnels salariés d'une des 13 structures habilitées Aidants Connect.</strong></p>
              <p>Si vous faites partie de l'une de ces structures, vous pouvez vous connecter :</p>
              <input type="email" id="id_email" class="form-control {% if form.errors %}state-invalid{% endif %}"
                name="email" aria-describedby="emailHelp" placeholder="Votre adresse email" required />
              {% for error in form.email.errors %}
                <div class="notification error" role="alert">{{ error }}</div>
              {% endfor %}
            </div>

            <div class="form-group">
              <label>{{ OTP_form.otp_token.label_tag }}</label>
              {{ OTP_form.otp_token }}
              {% for error in OTP_form.otp_token.errors %}
                <div class="notification error" role="alert">{{ error }}</div>
              {% endfor %}
            </div>
            <button type="submit" class="button">Valider</button>
          {% endif %}
        </form>
        <div class="text-center text-muted">

          <h2>Vous êtes sur la page de connexion Aidants Connect</h2>

          <h3>Vous cherchez à vous connecter à un service ?</h3>
          <p>
            <a href="https://franceconnect.gouv.fr/faq" target="_blank">La Foire Aux Questions FranceConnect</a> contient des informations pour vous aider.
          </p>

          <h3>Vous êtes un aidant professionnel ?</h3>
          <p>
            Si vous êtes déjà habilité Aidants Connect, vous pouvez
            <a href="mailto:aidantsconnect@beta.gouv.frsubject=[Site Aidants Connect - login] Demande d'aide au login">nous demander de l'aide</a>.
          </p>
          <p>
            Si vous souhaitez avoir des informations sur Aidants Connect,
            <a href="mailto:aidantsconnect@beta.gouv.fr?subject=[Site Aidants Connect - login] Demande d'informations">contactez-nous</a>.
          </p>

         </div>
      </div>
    </section>
  </div>
</div>
{% endblock content %}
